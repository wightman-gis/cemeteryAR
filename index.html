<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>AR Grave Locator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>

    <!-- AR.js with GPS support -->
    <script src="https://unpkg.com/aframe-ar-nft/dist/aframe-ar-nft.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;">

      <!-- GPS camera (tracks device location) -->
      <a-camera gps-camera rotation-reader></a-camera>
    </a-scene>

    <script>
      // Parse URL params for lat/lon
      const urlParams = new URLSearchParams(window.location.search);
      const lat = parseFloat(urlParams.get("lat"));
      const lon = parseFloat(urlParams.get("lon"));

      if (lat && lon) {
        const scene = document.querySelector("a-scene");

        // Create a custom image marker
        const marker = document.createElement("a-image");
        marker.setAttribute("src", "https://wightman-gis/cemeteryAR/images/PIN.png"); // ðŸ”¹ Replace with your repo path
        marker.setAttribute("gps-entity-place", `latitude: ${lat}; longitude: ${lon}`);
        marker.setAttribute("scale", "20 20 20");  // adjust size
        marker.setAttribute("look-at", "[gps-camera]"); // make it always face user

        scene.appendChild(marker);
      } else {
        alert("No coordinates found in the URL!");
      }
    </script>
  </body>
</html>
